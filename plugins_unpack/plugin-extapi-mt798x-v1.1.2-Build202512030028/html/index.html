<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <script src="../../static/js/vue.js"></script>
    <script src="../../static/js/plugin.js"></script>
    <script src="../../static/js/element.js"></script>
    <link rel="stylesheet" href="../../static/css/plugin.css" type="text/css">
    <link rel="stylesheet" href="../../static/css/element.css">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
</head>
<body>
    <div id="app" class="wrapper row" v-loading="loading" :element-loading-text="loading_text">
        <div class="box clearfix">
            <div class="box_block">
                <div class="clearfix margin_phone col-lg-11 col-lg-offset-1 ">
                    <div  class="line_edit">
                      <span  class="input_tit">å¯ç”¨æ‰©å±•APIï¼š</span> 
                      <div  class="input_group">
                          <el-switch @change="set_extapi" v-model="extapi"  ></el-switch>
                      </div>
                    </div>
                    <div class="line_edit" >
                        <span class="input_tit">APIå¯†é’¥(Token)ï¼š</span> 
                        <div class="input_group">
                            <input type="text" class="inptText" v-model="token" > 
                            <button type="button" @click="renewToken" class="btn btn_green rounded height26 w100">æ›´æ–°å¯†é’¥</button>
                        </div>
                    </div>
                    <div class="h20"></div>
                    <div class="h20">ğŸ§©API æ¥å£è¯´æ˜ï¼š</div>
                    <div class="apidoc col-lg-11 col-xs-12">
                        <div><b>æ¥å£åç§°ï¼š</b><sapn class="colorG"><b>addSK5Node</b></sapn></div>
                        <div><b>æ¥å£åŠŸèƒ½ï¼š</b>æ·»åŠ SK5èŠ‚ç‚¹æ¥å£ï¼Œè‹¥ç›¸åŒåç§°çš„èŠ‚ç‚¹å·²ç»å­˜åœ¨åˆ™æ›´æ–°è¯¥èŠ‚ç‚¹ã€‚èŠ‚ç‚¹æ›´æ–°åç›´æ¥ç”Ÿæ•ˆï¼Œæ— éœ€é‡å¯æœåŠ¡ã€‚</div>
                        <div><b>æ¥å£åœ°å€ï¼š</b><span class="colorR">POST</span>&nbsp;&nbsp;<a>{{window.location.origin}}/api/call</a></div>
                        <div><b>è¯·æ±‚å‚æ•°ï¼š</b>{</div>
                        <div style="padding-left:80px">"auth_token": "{{ token }}",</div>
                        <div style="padding-left:80px">"action": "addSK5Node",</div>
                        <div style="padding-left:80px"> "param": {</div>
                        <div style="padding-left:100px"> "name": "sk5node01",</div>
                        <div style="padding-left:100px"> "address": "110.110.110.110",</div>
                        <div style="padding-left:100px"> "port": "1081",</div>
                        <div style="padding-left:100px"> "type": "socks5",</div>
                        <div style="padding-left:100px"> "user": "username",</div>
                        <div style="padding-left:100px"> "password": "password",</div>
                        <div style="padding-left:100px"> "interfacename": "",</div>
                        <div style="padding-left:100px"> "dialer": ""</div>
                        <div style="padding-left:80px">}</div>
                        <div style="padding-left:60px">}</div>
                        <div class="h10"></div>
                        <div><b>è¿”å›ç»“æœï¼š</b>{</div>
                        <div style="padding-left:80px">"Result": 30000,</div>
                        <div style="padding-left:80px">"ErrMsg": "Success"</div>
                        <div style="padding-left:60px">}</div>
                        <div class="h10"></div>
                        <div><b>è¡¥å……è¯´æ˜ï¼š</b>è‹¥éœ€æŒ‡å®šå‡ºå£çº¿è·¯åˆ™è¯·æ±‚å‚æ•°ä¼ å…¥interfacenameï¼Œè‹¥éœ€æŒ‡å®šä¸­è½¬èŠ‚ç‚¹åˆ™è¯·æ±‚å‚æ•°ä¼ å…¥dialerï¼Œå¦åˆ™ä¼ ç©ºå­—ç¬¦ä¸²ã€‚interfacenameå’Œdialerä¸èƒ½åŒæ—¶ä¼ å…¥ã€‚</div>
                    </div>
                    <div class="h20"></div>
                    <div class="apidoc col-lg-11 col-xs-12">
                      <div><b>æ¥å£åç§°ï¼š</b><sapn class="colorG"><b>delSK5Node</b></sapn></div>
                      <div><b>æ¥å£åŠŸèƒ½ï¼š</b>åˆ é™¤æŒ‡å®šSK5èŠ‚ç‚¹æ¥å£ï¼ŒæŒ‰èŠ‚ç‚¹åç§°åŒ¹é…åˆ é™¤ã€‚</div>
                      <div><b>æ¥å£åœ°å€ï¼š</b><span class="colorR">POST</span>&nbsp;&nbsp;<a>{{window.location.origin}}/api/call</a></div>
                      <div><b>è¯·æ±‚å‚æ•°ï¼š</b>{</div>
                      <div style="padding-left:80px">"auth_token": "{{ token }}",</div>
                      <div style="padding-left:80px">"action": "delSK5Node",</div>
                      <div style="padding-left:80px"> "param": {</div>
                      <div style="padding-left:100px"> "name": "sk5node01"</div>
                      <div style="padding-left:80px">}</div>
                      <div style="padding-left:60px">}</div>
                      <div class="h10"></div>
                      <div><b>è¿”å›ç»“æœï¼š</b>{</div>
                      <div style="padding-left:80px">"Result": 30000,</div>
                      <div style="padding-left:80px">"ErrMsg": "Success"</div>
                      <div style="padding-left:60px">}</div>
                      <div class="h10"></div>
                    </div>
                    <div class="h20"></div>
                    <div class="apidoc col-lg-11 col-xs-12">
                      <div><b>æ¥å£åç§°ï¼š</b><sapn class="colorG"><b>addSK5Rule</b></sapn></div>
                      <div><b>æ¥å£åŠŸèƒ½ï¼š</b>æ·»åŠ SK5åˆ†æµè§„åˆ™ï¼ŒæŒ‰ç»ˆç«¯IPåœ°å€åŒ¹é…ï¼Œè‹¥å­˜åœ¨å·²æœ‰è®°å½•åˆ™æ›´æ–°è§„åˆ™ã€‚</div>
                      <div><b>æ¥å£åœ°å€ï¼š</b><span class="colorR">POST</span>&nbsp;&nbsp;<a>{{window.location.origin}}/api/call</a></div>
                      <div><b>è¯·æ±‚å‚æ•°ï¼š</b>{</div>
                      <div style="padding-left:80px">"auth_token": "{{ token }}",</div>
                      <div style="padding-left:80px">"action": "addSK5Rule",</div>
                      <div style="padding-left:80px"> "param": {</div>
                      <div style="padding-left:100px"> "address_ip": "192.168.9.100",</div>
                      <div style="padding-left:100px"> "name_sk": "sk5node01"</div>
                      <div style="padding-left:80px">}</div>
                      <div style="padding-left:60px">}</div>
                      <div class="h10"></div>
                      <div><b>è¿”å›ç»“æœï¼š</b>{</div>
                      <div style="padding-left:80px">"Result": 30000,</div>
                      <div style="padding-left:80px">"ErrMsg": "Success"</div>
                      <div style="padding-left:60px">}</div>
                      <div class="h10"></div>
                    </div>
                    <div class="h20"></div>
                    <div class="apidoc col-lg-11 col-xs-12">
                      <div><b>æ¥å£åç§°ï¼š</b><sapn class="colorG"><b>delSK5Rule</b></sapn></div>
                      <div><b>æ¥å£åŠŸèƒ½ï¼š</b>åˆ é™¤SK5åˆ†æµè§„åˆ™ï¼ŒæŒ‰ç»ˆç«¯IPåœ°å€åŒ¹é…åˆ é™¤ã€‚</div>
                      <div><b>æ¥å£åœ°å€ï¼š</b><span class="colorR">POST</span>&nbsp;&nbsp;<a>{{window.location.origin}}/api/call</a></div>
                      <div><b>è¯·æ±‚å‚æ•°ï¼š</b>{</div>
                      <div style="padding-left:80px">"auth_token": "{{ token }}",</div>
                      <div style="padding-left:80px">"action": "delSK5Rule",</div>
                      <div style="padding-left:80px"> "param": {</div>
                      <div style="padding-left:100px"> "address_ip": "192.168.9.100"</div>
                      <div style="padding-left:80px">}</div>
                      <div style="padding-left:60px">}</div>
                      <div class="h10"></div>
                      <div><b>è¿”å›ç»“æœï¼š</b>{</div>
                      <div style="padding-left:80px">"Result": 30000,</div>
                      <div style="padding-left:80px">"ErrMsg": "Success"</div>
                      <div style="padding-left:60px">}</div>
                      <div class="h10"></div>
                    </div>
                    <div class="h20"></div>
                    <div class="apidoc col-lg-11 col-xs-12">
                      <div><b>æ¥å£åç§°ï¼š</b><sapn class="colorG"><b>showSK5Rule</b></sapn></div>
                      <div><b>æ¥å£åŠŸèƒ½ï¼š</b>æŒ‰ç»ˆç«¯IPåœ°å€æŸ¥æ‰¾SK5åˆ†æµè§„åˆ™è¯¦æƒ…ã€‚</div>
                      <div><b>æ¥å£åœ°å€ï¼š</b><span class="colorR">POST</span>&nbsp;&nbsp;<a>{{window.location.origin}}/api/call</a></div>
                      <div><b>è¯·æ±‚å‚æ•°ï¼š</b>{</div>
                      <div style="padding-left:80px">"auth_token": "{{ token }}",</div>
                      <div style="padding-left:80px">"action": "show",</div>
                      <div style="padding-left:80px"> "param": {</div>
                      <div style="padding-left:100px"> "TYPE": "SK5Rule",</div>
                      <div style="padding-left:100px"> "address_ip": "192.168.9.100"</div>
                      <div style="padding-left:80px">}</div>
                      <div style="padding-left:60px">}</div>
                      <div class="h10"></div>
                      <div><b>è¿”å›ç»“æœï¼š</b>{</div>
                      <div style="padding-left:80px">"Result": 30000,</div>
                      <div style="padding-left:80px">"ErrMsg": "Success"</div>
                      <div style="padding-left:80px">"Data": [{"id": 1,"address_ip": "192.168.10.55","name_sk": "nodename1","status": "å·²å¯ç”¨"}]</div>
                      <div style="padding-left:60px">}</div>
                      <div class="h10"></div>
                    </div>
                    <div class="h20"></div>
                    <div class="apidoc col-lg-11 col-xs-12">
                      <div><b>æ¥å£åç§°ï¼š</b><sapn class="colorG"><b>enableSK5Rule</b></sapn></div>
                      <div><b>æ¥å£åŠŸèƒ½ï¼š</b>å¯ç”¨æŒ‡å®šSK5åˆ†æµè§„åˆ™ã€‚</div>
                      <div><b>æ¥å£åœ°å€ï¼š</b><span class="colorR">POST</span>&nbsp;&nbsp;<a>{{window.location.origin}}/api/call</a></div>
                      <div><b>è¯·æ±‚å‚æ•°ï¼š</b>{</div>
                      <div style="padding-left:80px">"auth_token": "{{ token }}",</div>
                      <div style="padding-left:80px">"action": "enableSK5Rule",</div>
                      <div style="padding-left:80px"> "param": {</div>
                      <div style="padding-left:100px"> "address_ip": "192.168.9.100"</div>
                      <div style="padding-left:80px">}</div>
                      <div style="padding-left:60px">}</div>
                      <div class="h10"></div>
                      <div><b>è¿”å›ç»“æœï¼š</b>{</div>
                      <div style="padding-left:80px">"Result": 30000,</div>
                      <div style="padding-left:80px">"ErrMsg": "Success"</div>
                      <div style="padding-left:60px">}</div>
                      <div class="h10"></div>
                    </div>
                    <div class="h20"></div>
                    <div class="apidoc col-lg-11 col-xs-12">
                      <div><b>æ¥å£åç§°ï¼š</b><sapn class="colorG"><b>disableSK5Rule</b></sapn></div>
                      <div><b>æ¥å£åŠŸèƒ½ï¼š</b>å¯ç”¨æŒ‡å®šSK5åˆ†æµè§„åˆ™ã€‚</div>
                      <div><b>æ¥å£åœ°å€ï¼š</b><span class="colorR">POST</span>&nbsp;&nbsp;<a>{{window.location.origin}}/api/call</a></div>
                      <div><b>è¯·æ±‚å‚æ•°ï¼š</b>{</div>
                      <div style="padding-left:80px">"auth_token": "{{ token }}",</div>
                      <div style="padding-left:80px">"action": "disableSK5Rule",</div>
                      <div style="padding-left:80px"> "param": {</div>
                      <div style="padding-left:100px"> "address_ip": "192.168.9.100"</div>
                      <div style="padding-left:80px">}</div>
                      <div style="padding-left:60px">}</div>
                      <div class="h10"></div>
                      <div><b>è¿”å›ç»“æœï¼š</b>{</div>
                      <div style="padding-left:80px">"Result": 30000,</div>
                      <div style="padding-left:80px">"ErrMsg": "Success"</div>
                      <div style="padding-left:60px">}</div>
                      <div class="h10"></div>
                    </div>
                    <div class="h20"></div>
                    <div class="apidoc col-lg-11 col-xs-12">
                      <div><b>æ¥å£åç§°ï¼š</b><sapn class="colorG"><b>modifyWhitelist</b></sapn></div>
                      <div><b>æ¥å£åŠŸèƒ½ï¼š</b>ä¿®æ”¹ç™½åå•ã€‚</div>
                      <div><b>æ¥å£åœ°å€ï¼š</b><span class="colorR">POST</span>&nbsp;&nbsp;<a>{{window.location.origin}}/api/call</a></div>
                      <div><b>è¯·æ±‚å‚æ•°ï¼š</b>{</div>
                      <div style="padding-left:80px">"auth_token": "{{ token }}",</div>
                      <div style="padding-left:80px">"action": "modifyWhitelist",</div>
                      <div style="padding-left:80px"> "param": {</div>
                      <div style="padding-left:100px"> "type": "åŸŸåç™½åå•: domain; IPç™½åå•: ip",</div>
                      <div style="padding-left:100px"> "configTxt64": "base64ç¼–ç çš„å…¨éƒ¨ç™½åå•å†…å®¹ï¼Œå¯ä½¿ç”¨ <a href='https://base64.us/' target='_blank'>https://base64.us/</a> æ¥é¢„ç¼–ç "</div>
                      <div style="padding-left:80px">}</div>
                      <div style="padding-left:60px">}</div>
                      <div class="h10"></div>
                      <div><b>è¿”å›ç»“æœï¼š</b>{</div>
                      <div style="padding-left:80px">"Result": 30000,</div>
                      <div style="padding-left:80px">"ErrMsg": "Success"</div>
                      <div style="padding-left:60px">}</div>
                      <div class="h10"></div>
                    </div>
                    <!-- <div class="h20"></div>
                    <div class="apidoc col-lg-11 col-xs-12">
                      <div><b>æ¥å£åç§°ï¼š</b><sapn class="colorG"><b>restartSK5</b></sapn></div>
                      <div><b>æ¥å£åŠŸèƒ½ï¼š</b>é‡æ–°å¯åŠ¨SK5æœåŠ¡ã€‚</div>
                      <div><b>æ¥å£åœ°å€ï¼š</b><span class="colorR">POST</span>&nbsp;&nbsp;<a>{{window.location.origin}}/api/call</a></div>
                      <div><b>è¯·æ±‚å‚æ•°ï¼š</b>{</div>
                      <div style="padding-left:80px">"auth_token": "{{ token }}",</div>
                      <div style="padding-left:80px">"action": "restartSK5",</div>
                      <div style="padding-left:80px"> "param": {}</div>
                      <div style="padding-left:80px">}</div>
                      <div style="padding-left:60px">}</div>
                      <div class="h10"></div>
                      <div><b>è¿”å›ç»“æœï¼š</b>{</div>
                      <div style="padding-left:80px">"Result": 30000,</div>
                      <div style="padding-left:80px">"ErrMsg": "Success"</div>
                      <div style="padding-left:60px">}</div>
                      <div class="h10"></div>
                    </div> -->
                </div>
            </div>
        </div>
    </div>
            
    <script type="module">
        var app = new Vue({
            el: '#app',
            data: { 
                extapi:false,
                token : "",
                loading:false,
                loading_text: "", 
            },
            created() {
                this.loadInitData();
            },
            methods: {
                set_extapi() {
                    self=this;

                    var payload = {
                        func_name: 'plugin_extapi',
                        action: 'set_extapi',
                        param: {extapi: self.extapi}
                    };
                    AjaxPost('/Action/call', payload, (response) => {
                        if (response.Result % 10000 == 0) {
                            self.$message({message: `æ‰©å±•APIå·²${self.extapi ? 'å¯ç”¨' : 'ç¦ç”¨'}ï¼`,type: 'success'});
                        } else {
                            self.extapi = !self.extapi;
                        }
                    });
                },
                loadInitData() {
                    self=this;
                    var payload = {
                        func_name: 'plugin_extapi',
                        action: 'show',
                        param: {
                            TYPE: 'data'
                        }
                    };
                    AjaxPost('/Action/call', payload, (response) => {
                        if (response.Result % 10000 == 0 && response.Data) {
                            const data = response.Data;
                            if (data.extapi === 1) {
                                self.extapi = true;
                            } else {
                                self.extapi = false;
                            }
                            self.token = data.token;
                        } else {
                            self.$message.error(`æ’ä»¶å¯åŠ¨å¤±è´¥ï¼Œ${response.ErrMsg}`);
                        }
                    });
                },
                renewToken() {
                    self=this;

                    var payload = {
                        func_name: 'plugin_extapi',
                        action: 'renewToken',
                        param: {}
                    };
                    AjaxPost('/Action/call', payload, (response) => {
                        if (response.Result % 10000 == 0) {
                            self.$message({message: `å¯†é’¥å·²æ›´æ–°ï¼`,type: 'success'});
                            self.loadInitData();
                        } 
                    });
                },
            }
        });
    </script>
    <style scoped>
      .apidoc {
          position: relative;
          background: #f5f5f5;
          padding: 15px 20px 15px 20px;
          color: #8c8c8c;
      }
    </style>
</body>
</html>
